<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Collection | Panun Poshak</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="cursor-dot" class="cursor-dot"></div>
    <div id="cursor-outline" class="cursor-outline"></div>

    <div id="announcement-bar" class="announcement-bar">
        <span id="announcement-text" class="fade-msg"></span>
    </div>

    <header>
        <div class="header-top">
            <div style="display: flex; align-items: center;">
                <div class="header-icon-btn" onclick="openAccountDrawer()">
                    ğŸ‘¤ <span style="font-size:0.7rem; margin-left:5px; text-transform:uppercase; letter-spacing:1px; display:none;" id="acc-label">Account</span>
                </div>
            </div>
            <a href="index.html" class="logo" style="margin-left: -40px;">PANUN POSHAK</a>
            <div style="display:flex; align-items:center;">
                <div class="header-icon-btn" style="margin-right:0;" onclick="openCartDrawer()">
                    ğŸ›’ <span id="cart-count" style="font-size:0.8rem; background:#C5A059; color:black; padding:2px 6px; border-radius:50%; margin-left:5px;">0</span>
                </div>
            </div>
        </div>
        
        <div class="search-box" style="margin: 10px auto; width: 90%;">
            <input type="text" id="global-search" placeholder="Search Collection..." oninput="instantSearch()">
            <button onclick="runSearch()">ğŸ”</button>
        </div>

        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="shop.html">Shop All</a>
            <a href="shop.html?q=pheran">Pherans</a>
            <a href="shop.html?q=shawl">Shawls</a>
            <a href="shop.html?q=bags">Bags</a>
            <a href="shop.html?q=men">Men</a>
            <a href="about.html">Our Story</a>
        </nav>
    </header>

    <div class="filter-container">
        <button onclick="window.location.href='shop.html'" class="filter-btn" id="btn-all">All</button>
        <button onclick="window.location.href='shop.html?q=clothing'" class="filter-btn" id="btn-clothing">Clothing</button>
        <button onclick="window.location.href='shop.html?q=bags'" class="filter-btn" id="btn-bags">Bags</button>
        <button onclick="window.location.href='shop.html?q=shawl'" class="filter-btn" id="btn-shawl">Shawls</button>
        <button onclick="window.location.href='shop.html?q=accessories'" class="filter-btn" id="btn-accessories">Accessories</button>
    </div>

    <section class="shop-container">
        <h2 id="collection-title" style="text-align:center; color:#C5A059; font-family:'Playfair Display', serif; margin-bottom:30px;">Current Collection</h2>
        <div id="product-grid" class="product-grid">
            <p style="text-align:center; color:white; width:100%; grid-column:1/-1;">Loading Collection...</p>
        </div>
    </section>
    
    <footer class="custom-footer">
        <div class="footer-logo-container">
            <h2 class="footer-logo">PANUN POSHAK</h2>
            <div class="footer-logo-circle"></div>
        </div>

        <div class="footer-nav">
            <a href="about.html" class="footer-link">Our Story</a>
            <a href="https://wa.me/917006083503" class="footer-link">Whatsapp</a>
            <a href="https://instagram.com/panu.nposhak" class="footer-link">Instagram</a>
            <a href="mailto:poshakpanun@gmail.com" class="footer-link">Email Support</a>
        </div>

        <div class="footer-divider"></div>

        <div class="footer-copyright">
            &copy; 2026 Panun Poshak. Heritage Reimagined.<br>
            Made with <span style="color: #ff4d4d;">â¤ï¸</span> in Srinagar, Kashmir.
        </div>
    </footer>

    <a href="https://wa.me/917006083503" target="_blank" class="chat-float" title="WhatsApp Us">
        <svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67Z"/></svg>
    </a>

    <div class="ai-trigger" onclick="toggleChat()">ğŸ¤–</div>

    <div class="chat-window" id="ai-chat">
        <div class="chat-header">
            <span>Panun Assistant</span>
            <span onclick="toggleChat()" style="cursor:pointer; font-size:1.2rem;">&times;</span>
        </div>
        <div class="chat-body" id="chat-body">
            <div class="msg bot">Salaam! ğŸ‘‹ I am the Panun Poshak Smart Assistant.<br>I can check order status, answer queries, or connect you to a human.</div>
            <div class="chat-chips">
                <div class="chip" onclick="botReply('track')">ğŸ“¦ Track Order</div>
                <div class="chip" onclick="botReply('shipping')">ğŸšš Shipping info</div>
                <div class="chip" onclick="botReply('return')">ğŸ”„ Returns</div>
                <div class="chip" onclick="botReply('human')">ğŸ‘¤ Talk to Human</div>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" id="chat-input" class="chat-input" placeholder="Type here..." onkeypress="handleChatKey(event)">
            <button class="chat-send" onclick="sendUserMessage()">â¤</button>
        </div>
    </div>

    <div class="cart-overlay" id="account-overlay" onclick="closeAccountDrawer()"></div>
    <div class="account-drawer" id="account-drawer">
        <div class="acc-header">
            <button class="close-cart" onclick="closeAccountDrawer()" style="position: absolute; top: 15px; right: 15px;">&times;</button>
            <div id="auth-guest" style="display:block;">
                <div class="user-placeholder">ğŸ‘¤</div>
                <h2 style="font-size:1.5rem; margin:0; color:white;">Welcome</h2>
                <p style="margin:5px 0 15px 0; color:#888; font-size:0.8rem;">Join the Panun Poshak Family</p>
                <button onclick="googleLogin()" class="google-btn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18"> 
                    Sign in with Google
                </button>
            </div>
            <div id="auth-user" style="display:none;">
                <img src="" id="user-pic" class="user-profile-pic">
                <h2 id="user-name" style="font-size:1.3rem; margin:0; color:white;">User Name</h2>
                <p id="user-email" style="margin:5px 0 0 0; color:#888; font-size:0.7rem;">user@email.com</p>
                <span class="logout-link" onclick="logout()">Sign Out</span>
            </div>
        </div>

        <div class="acc-tabs">
            <button class="acc-tab active" onclick="switchTab('wishlist')">Favourites</button>
            <button class="acc-tab" onclick="switchTab('orders')">Orders</button>
            <button class="acc-tab" onclick="switchTab('tracker')">Track</button>
            <button class="acc-tab" onclick="switchTab('support')">Help</button>
        </div>
        <div class="acc-content">
            <div id="tab-wishlist" class="acc-section active">
                <div id="wishlist-items">
                    <p style="color:#666; text-align:center; margin-top:20px;">Your favourites list is empty.</p>
                </div>
            </div>

            <div id="tab-orders" class="acc-section">
                <div id="order-history-list">
                    <p style="color:#666; text-align:center; margin-top:20px;">
                        <span style="display:block; font-size:2rem;">ğŸ“¦</span>
                        Sign in to view orders linked to your email.
                    </p>
                </div>
            </div>

            <div id="tab-tracker" class="acc-section">
                <p style="color:#ccc; font-size:0.9rem; margin-bottom:15px;">Track your recent purchase.</p>
                <input type="text" id="mini-track-input" placeholder="Order ID (e.g. #A1B2C3)" style="width:100%; padding:10px; margin-bottom:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
                <button onclick="miniTrack()" style="width:100%; padding:12px; background:#C5A059; color:black; font-weight:bold; border:none; cursor:pointer; border-radius:5px;">TRACK NOW</button>
            </div>

            <div id="tab-support" class="acc-section">
                <a href="https://wa.me/917006083503" target="_blank" style="display:block; padding:15px; background:#25D366; color:white; text-align:center; border-radius:10px; text-decoration:none; font-weight:bold; margin-bottom:15px;">Chat on WhatsApp</a>
                <a href="mailto:poshakpanun@gmail.com" style="display:block; padding:15px; background:#333; color:white; text-align:center; border-radius:10px; text-decoration:none; font-weight:bold;">Email Support</a>
            </div>
        </div>
    </div>

    <div class="cart-overlay" id="cart-overlay" onclick="closeCartDrawer()"></div>
    <div class="cart-drawer" id="cart-drawer">
        <div class="cart-header">
            <h2>Your Bag</h2>
            <button class="close-cart" onclick="closeCartDrawer()">&times;</button>
        </div>
        <div class="cart-items" id="drawer-items"></div>
        <div class="cart-footer">
            <div class="coupon-section">
                <input type="text" id="coupon-code" class="coupon-input" placeholder="Coupon Code">
                <button onclick="applyCoupon()" class="coupon-btn">APPLY</button>
            </div>
            <div id="coupon-msg" style="font-size:0.8rem; color:#25D366; margin-bottom:10px; display:none;"></div>
            <div class="cart-total-row"><span>Subtotal</span><span id="subtotal-price">â‚¹0</span></div>
            <div class="cart-total-row" id="discount-row" style="display:none; color:#C5A059;"><span>Discount</span><span id="discount-amount">-â‚¹0</span></div>
            <div class="cart-final-total"><span>Total</span><span id="drawer-total" style="color:#C5A059;">â‚¹0</span></div>
            <button onclick="goToCheckout()" class="checkout-btn">CHECKOUT SECURELY</button>
        </div>
    </div>

    <nav class="bottom-bar">
        <a href="index.html" class="bar-item">ğŸ  <small>Home</small></a>
        <a href="tracker.html" class="bar-item">ğŸšš <small>Track</small></a>
        <div class="bar-item" onclick="openCartDrawer()">
          ğŸ›’ <span id="cart-count-bar" style="background:#C5A059; color:black; padding:2px 6px; border-radius:50%; font-size:0.8rem; position:absolute; top:5px; right:30px;">0</span>
          <small>Bag</small>
        </div>
    </nav>

    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
